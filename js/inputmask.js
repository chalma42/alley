/* Input Mask plugin for jquery http://github.com/RobinHerbots/jquery.inputmask Copyright (c) 2010 - 2014 Robin Herbots Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php) Version: 0.0.0 */ (function(f){"function"===typeof define&&define.amd?define("jquery.inputmask",["jquery"],f):f(jQuery)})(function(f){if(void 0===f.fn.inputmask){var R=function(f){var e=document.createElement("input");f="on"+f;var d=f in e;d||(e.setAttribute(f,"return;"),d="function"==typeof e[f]);return d},C=function(b,e,d){return(b=d.aliases[b])?(b.alias&&C(b.alias,void 0,d),f.extend(!0,d,b),f.extend(!0,d,e),!0):!1},I=function(b,e){function d(d){function f(d,e,b,h){this.matches=[];this.isGroup=d||!1;this.isOptional= e||!1;this.isQuantifier=b||!1;this.isAlternator=h||!1;this.quantifier={min:1,max:1}}function e(d,f,h){var m=b.definitions[f],l=0==d.matches.length;h=void 0!=h?h:d.matches.length;if(m&&!z){for(var n=m.prevalidator,w=n?n.length:0,t=1;t<m.cardinality;t++){var s=w>=t?n[t-1]:[],x=s.validator,s=s.cardinality;d.matches.splice(h++,0,{fn:x?"string"==typeof x?new RegExp(x):new function(){this.test=x}:/./,cardinality:s?s:1,optionality:d.isOptional,newBlockMarker:l,casing:m.casing,def:m.definitionSymbol||f,placeholder:m.placeholder, mask:f})}d.matches.splice(h++,0,{fn:m.validator?"string"==typeof m.validator?new RegExp(m.validator):new function(){this.test=m.validator}:/./,cardinality:m.cardinality,optionality:d.isOptional,newBlockMarker:l,casing:m.casing,def:m.definitionSymbol||f,placeholder:m.placeholder,mask:f})}else d.matches.splice(h++,0,{fn:null,cardinality:0,optionality:d.isOptional,newBlockMarker:l,casing:null,def:f,placeholder:void 0,mask:f}),z=!1}for(var s=/(?:[?*+]|\{[0-9\+\*]+(?:,[0-9\+\*]*)?\})\??|[^.?*+^${[]()|\\]+|./g, z=!1,w=new f,l,h=[],E=[],n;l=s.exec(d);)switch(l=l[0],l.charAt(0)){case b.optionalmarker.end:case b.groupmarker.end:n=h.pop();0<h.length?(l=h[h.length-1],l.matches.push(n),l.isAlternator&&h.pop()):w.matches.push(n);break;case b.optionalmarker.start:h.push(new f(!1,!0));break;case b.groupmarker.start:h.push(new f(!0));break;case b.quantifiermarker.start:n=new f(!1,!1,!0);l=l.replace(/[{}]/g,"");var t=l.split(",");l=isNaN(t[0])?t[0]:parseInt(t[0]);t=1==t.length?l:isNaN(t[1])?t[1]:parseInt(t[1]);if("*"== t||"+"==t)l="*"==t?0:1;n.quantifier={min:l,max:t};if(0<h.length){t=h[h.length-1].matches;l=t.pop();if(!l.isGroup){var p=new f(!0);p.matches.push(l);l=p}t.push(l);t.push(n)}else l=w.matches.pop(),l.isGroup||(p=new f(!0),p.matches.push(l),l=p),w.matches.push(l),w.matches.push(n);break;case b.escapeChar:z=!0;break;case b.alternatormarker:n=new f(!1,!1,!1,!0);0<h.length?(t=h[h.length-1].matches,l=t.pop(),n.matches.push(l),t.push(n)):(l=w.matches.pop(),n.matches.push(l));h.push(n);break;default:if(0<h.length){if(e(h[h.length- 1],l),n=h[h.length-1],n.isAlternator){n=h.pop();for(l=0;l<n.matches.length;l++)n.matches[l].isGroup=!1;0<h.length?h[h.length-1].matches.push(n):w.matches.push(n)}}else 0<w.matches.length&&(n=w.matches[w.matches.length-1],n.isGroup&&(n.isGroup=!1,e(n,b.groupmarker.start,0),e(n,b.groupmarker.end))),e(w,l)}if(0<h.length){n=h[h.length-1];if(n.isAlternator)for(l=0;l<n.matches.length;l++)n.matches[l].isGroup=!1;w.matches=w.matches.concat(h)}0<w.matches.length&&(n=w.matches[w.matches.length-1],n.isGroup&& (n.isGroup=!1,e(n,b.groupmarker.start,0),e(n,b.groupmarker.end)),E.push(w));return E}function E(e,s){if(b.numericInput&&!0!==b.multi){e=e.split("").reverse();for(var x=0;x<e.length;x++)e[x]==b.optionalmarker.start?e[x]=b.optionalmarker.end:e[x]==b.optionalmarker.end?e[x]=b.optionalmarker.start:e[x]==b.groupmarker.start?e[x]=b.groupmarker.end:e[x]==b.groupmarker.end&&(e[x]=b.groupmarker.start);e=e.join("")}if(void 0!=e&&""!=e){if(0<b.repeat||"*"==b.repeat||"+"==b.repeat)e=b.groupmarker.start+e+b.groupmarker.end+ b.quantifiermarker.start+("*"==b.repeat?0:"+"==b.repeat?1:b.repeat)+","+b.repeat+b.quantifiermarker.end;void 0==f.inputmask.masksCache[e]&&(f.inputmask.masksCache[e]={mask:e,maskToken:d(e),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},metadata:s});return f.extend(!0,{},f.inputmask.masksCache[e])}}var z=[];f.isFunction(b.mask)&&(b.mask=b.mask.call(this,b));if(f.isArray(b.mask))if(e)f.each(b.mask,function(d,f){void 0!=f.mask?z.push(E(f.mask.toString(),f)):z.push(E(f.toString()))});else var s= "("+b.mask.join(")|(")+")",z=E(s);else 1==b.mask.length&&!1==b.greedy&&0!=b.repeat&&(b.placeholder=""),z=void 0!=b.mask.mask?E(b.mask.mask.toString(),b.mask):E(b.mask.toString());return z},ia="function"===typeof ScriptEngineMajorVersion?ScriptEngineMajorVersion():10<=(new Function("/*@cc_on return @_jscript_version; @*/"))(),p=navigator.userAgent,ja=null!==p.match(/iphone/i),ka=null!==p.match(/android.*safari.*/i),la=null!==p.match(/android.*chrome.*/i),ma=null!==p.match(/android.*firefox.*/i),na= /Kindle/i.test(p)||/Silk/i.test(p)||/KFTT/i.test(p)||/KFOT/i.test(p)||/KFJWA/i.test(p)||/KFJWI/i.test(p)||/KFSOWI/i.test(p)||/KFTHWA/i.test(p)||/KFTHWI/i.test(p)||/KFAPWA/i.test(p)||/KFAPWI/i.test(p),Y=R("paste")?"paste":R("input")?"input":"propertychange",K=function(b,e,d){function E(a,c,q){c=c||0;var f=[],r,k=0,b;do{if(!0===a&&e.validPositions[k]){var h=e.validPositions[k];b=h.match;r=h.locator.slice();f.push(null==b.fn?b.def:!0===q?h.input:b.placeholder||d.placeholder.charAt(k%d.placeholder.length))}else r= c>k?w(k,r,k-1)[0]:x(k,r,k-1),b=r.match,r=r.locator.slice(),f.push(null==b.fn?b.def:b.placeholder||d.placeholder.charAt(k%d.placeholder.length));k++}while((void 0==L||k-1<L)&&null!=b.fn||null==b.fn&&""!=b.def||c>=k);f.pop();return f}function z(a){var c=e;c.buffer=void 0;c.tests={};!0!==a&&(c._buffer=void 0,c.validPositions={},c.p=-1)}function s(a){var c=-1,q=e.validPositions;void 0==a&&(a=-1);var d=c,f;for(f in q){var b=parseInt(f);if(-1==a||null!=q[b].match.fn)b<a&&(d=b),b>=a&&(c=b)}return 1<a-d|| c<a?d:c}function m(a,c,q){if(d.insertMode&&void 0!=e.validPositions[a]&&void 0==q){q=f.extend(!0,{},e.validPositions);var b=s(),r;for(r=a;r<=b;r++)delete e.validPositions[r];e.validPositions[a]=c;c=!0;for(r=a;r<=b;r++){a=q[r];if(void 0!=a){var k=null==a.match.fn?r+1:D(r);c=K(k,a.match.def)?c&&!1!==t(k,a.input,!0,!0):!1}if(!c)break}if(!c)return e.validPositions=f.extend(!0,{},q),!1}else e.validPositions[a]=c;return!0}function p(a,c){var d,f=a;for(d=a;d<c;d++)delete e.validPositions[d];for(d=c;d<=s();){var b= e.validPositions[d],k=e.validPositions[f];void 0!=b&&void 0==k?(K(f,b.match.def)&&!1!==t(f,b.input,!0)&&(delete e.validPositions[d],d++),f++):d++}for(d=s();0<d&&(void 0==e.validPositions[d]||null==e.validPositions[d].match.fn);)delete e.validPositions[d],d--;z(!0)}function x(a,c,q){a=w(a,c,q);var f;for(c=0;c<a.length&&(f=a[c],!d.greedy&&(!f.match||!1!==f.match.optionality&&!1!==f.match.newBlockMarker||!0===f.match.optionalQuantifier));c++);return f}function C(a){return e.validPositions[a]?e.validPositions[a].match: w(a)[0].match}function K(a,c){for(var d=!1,f=w(a),e=0;e<f.length;e++)if(f[e].match&&f[e].match.def==c){d=!0;break}return d}function w(a,c,q){function b(c,q,e,h){function r(e,h,m){if(k==a&&void 0==e.matches)return u.push({match:e,locator:h.reverse()}),!0;if(void 0!=e.matches)if(e.isGroup&&!0!==m){if(e=r(c.matches[l+1],h))return!0}else if(e.isOptional){var g=e;if(e=b(e,q,h,m))e=u[u.length-1].match,(e=0==f.inArray(e,g.matches))&&(v=!0),k=a}else if(e.isAlternator){var g=u.slice(),n,s=h.length;n=0<q.length? q.shift():-1;if(-1==n){var t=k;u=[];b(e.matches[0],q.slice(),[0].concat(h),m);n=u.slice();k=t;u=[];e=b(e.matches[1],q,[1].concat(h),m);h=u.slice();u=[];for(m=0;m<n.length;m++){t=n[m];g.push(t);for(var W=0;W<h.length;W++)if(t.match.mask==h[W].match.mask){h.splice(W,1);t.locator[s]=-1;break}}u=g.concat(h)}else e=r(e.matches[n],[n].concat(h),m);if(e)return!0}else if(e.isQuantifier&&!0!==m)for(g=e,d.greedy=d.greedy&&isFinite(g.quantifier.max),s=0<q.length&&!0!==m?q.shift():0;s<(isNaN(g.quantifier.max)? s+1:g.quantifier.max)&&k<=a;s++){if(n=c.matches[f.inArray(g,c.matches)-1],e=r(n,[s].concat(h),!0))if(e=u[u.length-1].match,e.optionalQuantifier=s>g.quantifier.min-1,e=0==f.inArray(e,n.matches))if(s>g.quantifier.min-1){v=!0;k=a;break}else return!0;else return!0}else{if(e=b(e,q,h,m))return!0}else k++}for(var l=0<q.length?q.shift():0;l<c.matches.length;l++)if(!0!==c.matches[l].isQuantifier){var m=r(c.matches[l],[l].concat(e),h);if(m&&k==a)return m;if(k>a)break}}var h=e.maskToken,k=c?q:0;q=c||[0];var u= [],v=!1;if(void 0==c){c=a-1;for(var l;void 0==(l=e.validPositions[c])&&-1<c;)c--;if(void 0!=l&&-1<c)k=c,q=l.locator.slice();else{for(c=a-1;void 0==(l=e.tests[c])&&-1<c;)c--;void 0!=l&&-1<c&&(k=c,q=l[0].locator.slice())}}for(c=q.shift();c<h.length&&!(b(h[c],q,[c])&&k==a||k>a);c++);(0==u.length||v)&&u.push({match:{fn:null,cardinality:0,optionality:!0,casing:null,def:""},locator:[]});return e.tests[a]=u}function l(){void 0==e._buffer&&(e._buffer=E(!1,1));return e._buffer}function h(){void 0==e.buffer&& (e.buffer=E(!0,s(),!0));return e.buffer}function I(a,c){var f=h().slice();if(!0===a)z(),a=0,c=f.length;else for(var b=a;b<c;b++)delete e.validPositions[b],delete e.tests[b];for(b=a;b<c;b++)f[b]!=d.skipOptionalPartCharacter&&t(b,f[b],!0,!0)}function n(a,c){switch(c.casing){case "upper":a=a.toUpperCase();break;case "lower":a=a.toLowerCase()}return a}function t(a,c,q,b){function r(a,c,q,b){var k=!1;f.each(w(a),function(r,u){var v=u.match,l=c?1:0,T="";h();for(var g=v.cardinality;g>l;g--){var w;w=a-(g- 1);w=void 0==e.validPositions[w]?S(w):e.validPositions[w].input;T+=w}c&&(T+=c);k=null!=v.fn?v.fn.test(T,e,a,q,d):c!=v.def&&c!=d.skipOptionalPartCharacter||""==v.def?!1:{c:v.def,pos:a};if(!1!==k){l=void 0!=k.c?k.c:c;l=l==d.skipOptionalPartCharacter&&null===v.fn?v.def:l;g=a;void 0!=k.remove&&p(k.remove,k.remove+1);if(k.refreshFromBuffer){g=k.refreshFromBuffer;q=!0;I(!0===g?g:g.start,g.end);if(void 0==k.pos&&void 0==k.c)return k.pos=s(),!1;g=void 0!=k.pos?k.pos:a;if(g!=a)return k=f.extend(k,t(g,l,!0)), !1}else if(!0!==k&&void 0!=k.pos&&k.pos!=a&&(g=k.pos,I(a,g),g!=a))return k=f.extend(k,t(g,l,!0)),!1;if(!0!=k&&void 0==k.pos&&void 0==k.c)return!1;0<r&&z(!0);m(g,f.extend({},u,{input:n(l,v)}),b)||(k=!1);return!1}});return k}q=!0===q;for(var k=h(),u=a-1;-1<u&&(!e.validPositions[u]||null!=e.validPositions[u].fn);u--)if((!N(u)||k[u]!=S(u))&&1<w(u).length){r(u,k[u],!0);break}if(a>=O())return!1;k=r(a,c,q,b);if(!q&&!1===k)if((u=e.validPositions[a])&&null==u.match.fn&&(u.match.def==c||c==d.skipOptionalPartCharacter))k= {caret:D(a)};else if((d.insertMode||void 0==e.validPositions[D(a)])&&!N(a))for(var u=a+1,v=D(a);u<=v;u++)if(k=r(u,c,q,b),!1!==k){a=u;break}!0===k&&(k={pos:a});return k}function N(a){a=C(a);return null!=a.fn?a.fn:!1}function O(){var a;L=g.prop("maxLength");-1==L&&(L=void 0);if(!1==d.greedy){var c;c=s();a=e.validPositions[c];var f=void 0!=a?a.locator.slice():void 0;for(c+=1;void 0==a||null!=a.match.fn||null==a.match.fn&&""!=a.match.def;c++)a=x(c,f,c-1),f=a.locator.slice();a=c}else a=h().length;return void 0== L||a<L?a:L}function D(a){var c=O();if(a>=c)return c;for(;++a<c&&!N(a)&&(!0!==d.nojumps||d.nojumpsThreshold>a););return a}function V(a){if(0>=a)return 0;for(;0<--a&&!N(a););return a}function H(a,c,d){a._valueSet(c.join(""));void 0!=d&&y(a,d)}function S(a,c){c=c||C(a);return c.placeholder||(null==c.fn?c.def:d.placeholder.charAt(a%d.placeholder.length))}function P(a,c,q,b,r){b=void 0!=b?b.slice():ha(a._valueGet()).split("");z();c&&a._valueSet("");f.each(b,function(c,d){if(!0===r){var b=e.p,b=-1==b?b: V(b),h=-1==b?c:D(b);-1==f.inArray(d,l().slice(b+1,h))&&Z.call(a,void 0,!0,d.charCodeAt(0),!1,q,c)}else Z.call(a,void 0,!0,d.charCodeAt(0),!1,q,c),q=q||0<c&&c>e.p});c&&(c=d.onKeyPress.call(this,void 0,h(),0,d),X(a,c),H(a,h(),f(a).is(":focus")?D(s(0)):void 0))}function R(a){return f.inputmask.escapeRegex.call(this,a)}function ha(a){return a.replace(new RegExp("("+R(l().join(""))+")*$"),"")}function ca(a){if(a.data("_inputmask")&&!a.hasClass("hasDatepicker")){var c=[],q=e.validPositions,b;for(b in q)q[b].match&& null!=q[b].match.fn&&c.push(q[b].input);c=(B?c.reverse():c).join("");q=(B?h().reverse():h()).join("");f.isFunction(d.onUnMask)&&(c=d.onUnMask.call(a,q,c,d));return c}return a[0]._valueGet()}function M(a){!B||"number"!=typeof a||d.greedy&&""==d.placeholder||(a=h().length-a);return a}function y(a,c,e){a=a.jquery&&0<a.length?a[0]:a;if("number"==typeof c){c=M(c);e=M(e);e="number"==typeof e?e:c;var b=f(a).data("_inputmask")||{};b.caret={begin:c,end:e};f(a).data("_inputmask",b);f(a).is(":visible")&&(a.scrollLeft= a.scrollWidth,!1==d.insertMode&&c==e&&e++,a.setSelectionRange?(a.selectionStart=c,a.selectionEnd=e):a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveEnd("character",e),a.moveStart("character",c),a.select()))}else return b=f(a).data("_inputmask"),!f(a).is(":visible")&&b&&void 0!=b.caret?(c=b.caret.begin,e=b.caret.end):a.setSelectionRange?(c=a.selectionStart,e=a.selectionEnd):document.selection&&document.selection.createRange&&(a=document.selection.createRange(),c=0-a.duplicate().moveStart("character", -1E5),e=c+a.text.length),c=M(c),e=M(e),{begin:c,end:e}}function $(a){var c=h(),d=c.length,b,r=s(),k={},l=void 0!=e.validPositions[r]?e.validPositions[r].locator.slice():void 0,g;for(b=r+1;b<c.length;b++)g=x(b,l,b-1),l=g.locator.slice(),k[b]=f.extend(!0,{},g);for(b=d-1;b>r;b--)if(g=k[b].match,(g.optionality||g.optionalQuantifier)&&c[b]==S(b,g))d--;else break;return a?{l:d,def:k[d]?k[d].match:void 0}:d}function aa(a){var c=h().slice(),d=$();c.length=d;H(a,c)}function Q(a){if(f.isFunction(d.isComplete))return d.isComplete.call(g, a,d);if("*"!=d.repeat){var c=!1,e=$(!0),b=V(e.l);if(s()==b&&(void 0==e.def||e.def.newBlockMarker||e.def.optionalQuantifier))for(c=!0,e=0;e<=b;e++){var h=N(e);if(h&&(void 0==a[e]||a[e]==S(e))||!h&&a[e]!=S(e)){c=!1;break}}return c}}function oa(a,c){return B?1<a-c||1==a-c&&d.insertMode:1<c-a||1==c-a&&d.insertMode}function pa(a){a=f._data(a).events;f.each(a,function(a,d){f.each(d,function(a,c){if("inputmask"==c.namespace&&"setvalue"!=c.type){var d=c.handler;c.handler=function(a){if(this.readOnly||this.disabled)a.preventDefault; else return d.apply(this,arguments)}}})})}function qa(a){function c(a){if(void 0==f.valHooks[a]||!0!=f.valHooks[a].inputmaskpatch){var c=f.valHooks[a]&&f.valHooks[a].get?f.valHooks[a].get:function(a){return a.value},d=f.valHooks[a]&&f.valHooks[a].set?f.valHooks[a].set:function(a,c){a.value=c;return a};f.valHooks[a]={get:function(a){var d=f(a);if(d.data("_inputmask")){if(d.data("_inputmask").opts.autoUnmask)return d.inputmask("unmaskedvalue");a=c(a);d=(d=d.data("_inputmask").maskset._buffer)?d.join(""): "";return a!=d?a:""}return c(a)},set:function(a,c){var e=f(a),b=e.data("_inputmask");b?(b=d(a,f.isFunction(b.opts.onBeforeMask)?b.opts.onBeforeMask.call(A,c,b.opts):c),e.triggerHandler("setvalue.inputmask")):b=d(a,c);return b},inputmaskpatch:!0}}}function d(){var a=f(this),c=f(this).data("_inputmask");return c?c.opts.autoUnmask?a.inputmask("unmaskedvalue"):k.call(this)!=l().join("")?k.call(this):"":k.call(this)}function e(a){var c=f(this).data("_inputmask");c?(g.call(this,f.isFunction(c.opts.onBeforeMask)? c.opts.onBeforeMask.call(A,a,c.opts):a),f(this).triggerHandler("setvalue.inputmask")):g.call(this,a)}function b(a){f(a).bind("mouseenter.inputmask",function(a){a=f(this);this._valueGet()!=h().join("")&&a.trigger("setvalue")});if(a=f._data(a).events.mouseover){for(var c=a[a.length-1],d=a.length-1;0<d;d--)a[d]=a[d-1];a[0]=c}}var k,g;a._valueGet||(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(a,"value"),document.__lookupGetter__&&a.__lookupGetter__("value")?(k=a.__lookupGetter__("value"), g=a.__lookupSetter__("value"),a.__defineGetter__("value",d),a.__defineSetter__("value",e)):(k=function(){return a.value},g=function(c){a.value=c},c(a.type),b(a)),a._valueGet=function(){return B?k.call(this).split("").reverse().join(""):k.call(this)},a._valueSet=function(a){g.call(this,B?a.split("").reverse().join(""):a)})}function da(a,c,b){if(d.numericInput||B)c==d.keyCode.BACKSPACE?c=d.keyCode.DELETE:c==d.keyCode.DELETE&&(c=d.keyCode.BACKSPACE),B&&(a=b.end,b.end=b.begin,b.begin=a);c==d.keyCode.BACKSPACE&& 1>=b.end-b.begin?b.begin=V(b.begin):c==d.keyCode.DELETE&&b.begin==b.end&&b.end++;p(b.begin,b.end);c=s(b.begin);e.p=c<b.begin?D(c):b.begin}function X(a,c,d){if(c&&c.refreshFromBuffer){var b=c.refreshFromBuffer;I(!0===b?b:b.start,b.end);z(!0);void 0!=d&&(H(a,h()),y(a,c.caret||d.begin,c.caret||d.end))}}function ea(a){ba=!1;var c=this,b=f(c),g=a.keyCode,r=y(c);g==d.keyCode.BACKSPACE||g==d.keyCode.DELETE||ja&&127==g||a.ctrlKey&&88==g?(a.preventDefault(),88==g&&(J=h().join("")),da(c,g,r),H(c,h(),e.p),c._valueGet()== l().join("")&&b.trigger("cleared"),d.showTooltip&&b.prop("title",e.mask)):g==d.keyCode.END||g==d.keyCode.PAGE_DOWN?setTimeout(function(){var b=D(s());d.insertMode||b!=O()||a.shiftKey||b--;y(c,a.shiftKey?r.begin:b,b)},0):g==d.keyCode.HOME&&!a.shiftKey||g==d.keyCode.PAGE_UP?y(c,0,a.shiftKey?r.begin:0):g==d.keyCode.ESCAPE||90==g&&a.ctrlKey?(P(c,!0,!1,J.split("")),b.click()):g!=d.keyCode.INSERT||a.shiftKey||a.ctrlKey?!1!=d.insertMode||a.shiftKey||(g==d.keyCode.RIGHT?setTimeout(function(){var a=y(c);y(c, a.begin)},0):g==d.keyCode.LEFT&&setTimeout(function(){var a=y(c);y(c,B?a.begin+1:a.begin-1)},0)):(d.insertMode=!d.insertMode,y(c,d.insertMode||r.begin!=O()?r.begin:r.begin-1));var b=y(c),k=d.onKeyDown.call(this,a,h(),b.begin,d);X(c,k,b);fa=-1!=f.inArray(g,d.ignorables)}function Z(a,c,b,g,l,k){if(void 0==b&&ba)return!1;ba=!0;var n=f(this);a=a||window.event;b=c?b:a.which||a.charCode||a.keyCode;if(!(!0===c||a.ctrlKey&&a.altKey)&&(a.ctrlKey||a.metaKey||fa))return!0;if(b){!0!==c&&46==b&&!1==a.shiftKey&& ","==d.radixPoint&&(b=44);var v,x;b=String.fromCharCode(b);c?(k=l?k:s()+1,v={begin:k,end:k}):v=y(this);if(k=oa(v.begin,v.end))e.undoPositions=f.extend(!0,{},e.validPositions),da(this,d.keyCode.DELETE,v),d.insertMode||(d.insertMode=!d.insertMode,m(v.begin,l),d.insertMode=!d.insertMode),k=!d.multi;e.writeOutBuffer=!0;v=B&&!k?v.end:v.begin;var p=t(v,b,l);!1!==p&&(!0!==p&&(v=void 0!=p.pos?p.pos:v,b=void 0!=p.c?p.c:b),z(!0),void 0!=p.caret?x=p.caret:(l=e.validPositions,x=void 0!=l[v+1]&&1<w(v+1,l[v].locator.slice(), v).length?v+1:D(v)),e.p=x);if(!1!==g){var E=this;setTimeout(function(){d.onKeyValidation.call(E,p,d)},0);if(e.writeOutBuffer&&!1!==p){var A=h();H(this,A,c?void 0:d.numericInput?V(x):x);!0!==c&&setTimeout(function(){!0===Q(A)&&n.trigger("complete");U=!0;n.trigger("input")},0)}else k&&(e.buffer=void 0,e.validPositions=e.undoPositions)}else k&&(e.buffer=void 0,e.validPositions=e.undoPositions);d.showTooltip&&n.prop("title",e.mask);a&&!0!=c&&(a.preventDefault?a.preventDefault():a.returnValue=!1,c=y(this), a=d.onKeyPress.call(this,a,h(),c.begin,d),X(this,a,c));for(var C in e.validPositions);}}function ra(a){var c=f(this),b=a.keyCode,e=h(),g=y(this);a=d.onKeyUp.call(this,a,e,g.begin,d);X(this,a,g);b==d.keyCode.TAB&&d.showMaskOnFocus&&(c.hasClass("focus-inputmask")&&0==this._valueGet().length?(z(),e=h(),H(this,e),y(this,0),J=h().join("")):(H(this,e),y(this,M(0),M(O()))))}function ga(a){if(!0===U&&"input"==a.type)return U=!1,!0;var c=f(this),b=this._valueGet();if("propertychange"==a.type&&this._valueGet().length<= O())return!0;"paste"==a.type&&(window.clipboardData&&window.clipboardData.getData?b=window.clipboardData.getData("Text"):a.originalEvent&&a.originalEvent.clipboardData&&a.originalEvent.clipboardData.getData&&(b=a.originalEvent.clipboardData.getData("text/plain")));a=f.isFunction(d.onBeforePaste)?d.onBeforePaste.call(this,b,d):b;P(this,!0,!1,a.split(""),!0);c.click();!0===Q(h())&&c.trigger("complete");return!1}function sa(a){if(!0===U&&"input"==a.type)return U=!1,!0;var b=y(this),e=this._valueGet(), e=e.replace(new RegExp("("+R(l().join(""))+")*"),"");b.begin>e.length&&(y(this,e.length),b=y(this));1!=h().length-e.length||e.charAt(b.begin)==h()[b.begin]||e.charAt(b.begin+1)==h()[b.begin]||N(b.begin)||(a.keyCode=d.keyCode.BACKSPACE,ea.call(this,a));a.preventDefault()}function ta(a){g=f(a);if(g.is(":input")&&"number"!=g.attr("type")){g.data("_inputmask",{maskset:e,opts:d,isRTL:!1});d.showTooltip&&g.prop("title",e.mask);("rtl"==a.dir||d.rightAlign)&&g.css("text-align","right");if("rtl"==a.dir||d.numericInput){a.dir= "ltr";g.removeAttr("dir");var b=g.data("_inputmask");b.isRTL=!0;g.data("_inputmask",b);B=!0}g.unbind(".inputmask");g.removeClass("focus-inputmask");g.closest("form").bind("submit",function(){J!=h().join("")&&g.change();d.autoUnmask&&d.removeMaskOnSubmit&&g.inputmask("remove")}).bind("reset",function(){setTimeout(function(){g.trigger("setvalue")},0)});g.bind("mouseenter.inputmask",function(){!f(this).hasClass("focus-inputmask")&&d.showMaskOnHover&&this._valueGet()!=h().join("")&&H(this,h())}).bind("blur.inputmask", function(){var a=f(this);if(a.data("_inputmask")){var b=this._valueGet(),c=h();a.removeClass("focus-inputmask");J!=h().join("")&&a.change();d.clearMaskOnLostFocus&&""!=b&&(b==l().join("")?this._valueSet(""):aa(this));!1===Q(c)&&(a.trigger("incomplete"),d.clearIncomplete&&(z(),d.clearMaskOnLostFocus?this._valueSet(""):(c=l().slice(),H(this,c))))}}).bind("focus.inputmask",function(){var a=f(this),b=this._valueGet();d.showMaskOnFocus&&!a.hasClass("focus-inputmask")&&(!d.showMaskOnHover||d.showMaskOnHover&& ""==b)&&this._valueGet()!=h().join("")&&H(this,h(),D(s()));a.addClass("focus-inputmask");J=h().join("")}).bind("mouseleave.inputmask",function(){var a=f(this);d.clearMaskOnLostFocus&&(a.hasClass("focus-inputmask")||this._valueGet()==a.attr("placeholder")||(this._valueGet()==l().join("")||""==this._valueGet()?this._valueSet(""):aa(this)))}).bind("click.inputmask",function(){var a=this;f(a).is(":focus")&&setTimeout(function(){var b=y(a);if(b.begin==b.end){var b=B?M(b.begin):b.begin,c=s(b),c=D(c);b< c?N(b)?y(a,b):y(a,D(b)):y(a,c)}},0)}).bind("dblclick.inputmask",function(){var a=this;setTimeout(function(){y(a,0,D(s()))},0)}).bind(Y+".inputmask dragdrop.inputmask drop.inputmask",ga).bind("setvalue.inputmask",function(){P(this,!0);J=h().join("")}).bind("complete.inputmask",d.oncomplete).bind("incomplete.inputmask",d.onincomplete).bind("cleared.inputmask",d.oncleared);g.bind("keydown.inputmask",ea).bind("keypress.inputmask",Z).bind("keyup.inputmask",ra);if(ka||ma||la||na)"input"==Y&&g.unbind(Y+ ".inputmask"),g.bind("input.inputmask",sa);ia&&g.bind("input.inputmask",ga);qa(a);b=f.isFunction(d.onBeforeMask)?d.onBeforeMask.call(a,a._valueGet(),d):a._valueGet();P(a,!0,!1,b.split(""),!0);J=h().join("");var m;try{m=document.activeElement}catch(n){}!1===Q(h())&&d.clearIncomplete&&z();d.clearMaskOnLostFocus?h().join("")==l().join("")?a._valueSet(""):aa(a):H(a,h());m===a&&(g.addClass("focus-inputmask"),y(a,D(s())));pa(a)}}var B=!1,J,g,ba=!1,U=!1,fa=!1,L;if(void 0!=b)switch(b.action){case "isComplete":return g= f(b.el),e=g.data("_inputmask").maskset,d=g.data("_inputmask").opts,Q(b.buffer);case "unmaskedvalue":return g=b.$input,e=g.data("_inputmask").maskset,d=g.data("_inputmask").opts,B=b.$input.data("_inputmask").isRTL,ca(b.$input);case "mask":J=h().join("");ta(b.el);break;case "format":g=f({});g.data("_inputmask",{maskset:e,opts:d,isRTL:d.numericInput});d.numericInput&&(B=!0);var F=b.value.split("");P(g,!1,!1,B?F.reverse():F,!0);d.onKeyPress.call(this,void 0,h(),0,d);return B?h().reverse().join(""):h().join(""); case "isValid":g=f({});g.data("_inputmask",{maskset:e,opts:d,isRTL:d.numericInput});d.numericInput&&(B=!0);F=b.value.split("");P(g,!1,!0,B?F.reverse():F);var F=h(),ua=$();F.length=ua;return Q(F)&&b.value==F.join("");case "getemptymask":return g=f(b.el),e=g.data("_inputmask").maskset,d=g.data("_inputmask").opts,l();case "remove":var A=b.el;g=f(A);e=g.data("_inputmask").maskset;d=g.data("_inputmask").opts;A._valueSet(ca(g));g.unbind(".inputmask");g.removeClass("focus-inputmask");g.removeData("_inputmask"); Object.getOwnPropertyDescriptor&&(F=Object.getOwnPropertyDescriptor(A,"value"));F&&F.get?A._valueGet&&Object.defineProperty(A,"value",{get:A._valueGet,set:A._valueSet}):document.__lookupGetter__&&A.__lookupGetter__("value")&&A._valueGet&&(A.__defineGetter__("value",A._valueGet),A.__defineSetter__("value",A._valueSet));try{delete A._valueGet,delete A._valueSet}catch(va){A._valueGet=void 0,A._valueSet=void 0}}};f.inputmask={defaults:{placeholder:"_",optionalmarker:{start:"[",end:"]"},quantifiermarker:{start:"{", end:"}"},groupmarker:{start:"(",end:")"},alternatormarker:"|",escapeChar:"\\",mask:null,oncomplete:f.noop,onincomplete:f.noop,oncleared:f.noop,repeat:0,greedy:!0,autoUnmask:!1,removeMaskOnSubmit:!0,clearMaskOnLostFocus:!0,insertMode:!0,clearIncomplete:!1,aliases:{},alias:null,onKeyUp:f.noop,onKeyPress:f.noop,onKeyDown:f.noop,onBeforeMask:void 0,onBeforePaste:void 0,onUnMask:void 0,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:f.noop,skipOptionalPartCharacter:" ",showTooltip:!1,numericInput:!1, rightAlign:!1,radixPoint:"",nojumps:!1,nojumpsThreshold:0,definitions:{9:{validator:"[0-9]",cardinality:1,definitionSymbol:"*"},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\u00c0-\u00ff\u00b5]",cardinality:1,definitionSymbol:"*"},"*":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\u00c0-\u00ff\u00b5]",cardinality:1}},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93, NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},ignorables:[8,9,13,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123],isComplete:void 0},masksCache:{},escapeRegex:function(b){return b.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)","gim"),"\\$1")},format:function(b,e){var d=f.extend(!0,{},f.inputmask.defaults, e);C(d.alias,e,d);return K({action:"format",value:b},I(d),d)},isValid:function(b,e){var d=f.extend(!0,{},f.inputmask.defaults,e);C(d.alias,e,d);return K({action:"isValid",value:b},I(d),d)}};f.fn.inputmask=function(b,e,d,p,z){function s(b,d){var e=f(b),m;for(m in d){var l=e.data("inputmask-"+m.toLowerCase());void 0!=l&&(d[m]=l)}return d}d=d||K;p=p||"_inputmask";var m=f.extend(!0,{},f.inputmask.defaults,e),G;if("string"===typeof b)switch(b){case "mask":return C(m.alias,e,m),G=I(m,d!==K),0==G.length? this:this.each(function(){d({action:"mask",el:this},f.extend(!0,{},G),s(this,m))});case "unmaskedvalue":return b=f(this),b.data(p)?d({action:"unmaskedvalue",$input:b}):b.val();case "remove":return this.each(function(){f(this).data(p)&&d({action:"remove",el:this})});case "getemptymask":return this.data(p)?d({action:"getemptymask",el:this}):"";case "hasMaskedValue":return this.data(p)?!this.data(p).opts.autoUnmask:!1;case "isComplete":return this.data(p)?d({action:"isComplete",buffer:this[0]._valueGet().split(""), el:this}):!0;case "getmetadata":if(this.data(p))return G=this.data(p).maskset,G.metadata;break;case "_detectScope":return C(m.alias,e,m),void 0==z||C(z,e,m)||-1!=f.inArray(z,"mask unmaskedvalue remove getemptymask hasMaskedValue isComplete getmetadata _detectScope".split(" "))||(m.mask=z),f.isFunction(m.mask)&&(m.mask=m.mask.call(this,m)),f.isArray(m.mask);default:return C(m.alias,e,m),C(b,e,m)||(m.mask=b),G=I(m,d!==K),void 0==G?this:this.each(function(){d({action:"mask",el:this},f.extend(!0,{},G), s(this,m))})}else{if("object"==typeof b)return m=f.extend(!0,{},f.inputmask.defaults,b),C(m.alias,b,m),G=I(m,d!==K),void 0==G?this:this.each(function(){d({action:"mask",el:this},f.extend(!0,{},G),s(this,m))});if(void 0==b)return this.each(function(){var b=f(this).attr("data-inputmask");if(b&&""!=b)try{var b=b.replace(RegExp("'","g"),'"'),p=f.parseJSON("{"+b+"}");f.extend(!0,p,e);m=f.extend(!0,{},f.inputmask.defaults,p);C(m.alias,p,m);m.alias=void 0;f(this).inputmask("mask",m,d)}catch(s){}})}}}});